# App Builder

Build custom applications with a visual editor and JSON definitions

---

App Builder is currently experimental. APIs and schema may change in future releases.

## What is App Builder?

App Builder lets you create custom web applications using a visual editor or JSON definitions. Applications consist of pages with layouts, components, and actions - all without writing frontend code.

**Key capabilities:**

- Visual drag-and-drop editor
- 20+ pre-built components (tables, forms, charts, etc.)
- Expression syntax for dynamic content (`{{ user.name }}`)
- Workflow integration for backend logic
- Role-based permissions
- Embeddable in external sites

## How It Works

```
Define pages → Add components → Configure actions → Publish
```

**Application lifecycle:**

1. Create application in editor
2. Add pages with layouts (rows, columns, grids)
3. Drop components and configure properties
4. Connect to workflows and data sources
5. Set up permissions
6. Publish and share

## Architecture

App Builder uses a three-level data model that enables granular management and efficient updates:

### Apps

The top-level container. An app has:

- **Metadata**: Name, description, slug, version
- **Settings**: Theme configuration, default page
- **Navigation**: Menu structure and routing
- **Permissions**: Application-level access controls

### Pages

Pages belong to an app and define individual screens. Each page has:

- **Layout structure**: Rows, columns, grids for component arrangement
- **Component references**: The building blocks placed within the layout
- **Data sources**: Data loaded when the page mounts
- **Page-specific settings**: Title, path, permissions, launch workflow

### Components

Components are the atomic building blocks placed within pages:

- **Display components**: Text, Heading, Image, StatCard, Badge, Progress
- **Input components**: TextInput, NumberInput, Select, Checkbox
- **Data components**: DataTable, Tabs, FileViewer
- **Layout containers**: Row, Column, Grid, Card

This three-table architecture enables:

- **Granular updates**: Modify a single component without touching the entire app
- **Efficient syncing**: Only changed entities are transmitted
- **Precise MCP operations**: AI assistants can make targeted changes
- **Optimistic UI**: Immediate feedback while changes persist

## Core Concepts

### Pages

Pages are the screens of your application. Each page has:

- **Path**: URL route (e.g., `/dashboard`, `/users/:id`)
- **Layout**: Component arrangement (rows, columns, grids)
- **Launch Workflow**: Workflow to run on page load (recommended for data loading)
- **Permissions**: Who can access the page

**Data Loading Pattern**: All data loading uses workflows. Set `launchWorkflowId` and `launchWorkflowDataSourceId` on the page, then access results via `{{ workflow.<dataSourceId>.result }}` in expressions.

### Layouts

Layouts arrange components using flexbox or grid:

| Type | Description | Use Case |
|------|-------------|----------|
| `row` | Horizontal flex container | Toolbars, button groups |
| `column` | Vertical flex container | Forms, card stacks |
| `grid` | CSS grid with columns | Dashboards, galleries |

Layouts can be nested for complex arrangements.

### Components

Components are the building blocks:

- **Display**: Heading, Text, Image, Badge, Progress, StatCard
- **Data**: DataTable, Tabs, FileViewer
- **Input**: TextInput, NumberInput, Select, Checkbox
- **Interactive**: Button, Modal, Card
- **Forms**: FormEmbed, FormGroup

See [Components Reference](/sdk-reference/app-builder/components) for full details.

### Expressions

Dynamic content uses `{{ expression }}` syntax:

```javascript
// Access user data
{{ user.name }}
{{ user.email }}

// Access page variables
{{ variables.selectedId }}

// Access form field values
{{ field.customerName }}

// Access workflow results (recommended pattern)
{{ workflow.customers.result }}           // Full result from "customers" workflow
{{ workflow.stats.result.revenue }}       // Nested property

// Comparisons and logic
{{ user.role == 'admin' }}
{{ variables.count > 0 && user.isActive }}
```

See [Expressions Reference](/sdk-reference/app-builder/expressions) for full syntax.

### Actions

Components trigger actions on user interaction:

- **navigate**: Go to another page
- **workflow**: Execute a backend workflow
- **set-variable**: Update a page variable
- **refresh-table**: Reload a data source
- **submit**: Submit form fields to a workflow

See [Actions Reference](/sdk-reference/app-builder/actions) for configuration.

## Building Apps with MCP

Apps are built in pieces using MCP tools, not as a single JSON blob. This enables AI assistants to make precise, targeted changes.

**Recommended workflow:**

1. `create_app` - Create app metadata (name, description)
2. `create_page` - Add pages one at a time
3. `create_component` - Add components to pages
4. `update_component` - Modify individual components
5. Preview in draft mode at `/apps/{slug}?draft=true`
6. `publish_app` when ready to go live

Each step validates automatically - there's no separate validation tool needed.

**Draft mode:** Apps stay in draft until explicitly published. Users can preview and test before going live.

## Data Model Example

The JSON below shows the recommended data model using `launchWorkflowId` for data loading. When using MCP tools, you work with individual pieces rather than this full structure:

```json
{
  "id": "dashboard-app",
  "name": "Customer Dashboard",
  "version": "1.0.0",
  "pages": [
    {
      "id": "home",
      "title": "Customers",
      "path": "/",
      "launchWorkflowId": "get_customers",
      "launchWorkflowDataSourceId": "customers",
      "layout": {
        "type": "column",
        "gap": 16,
        "children": [
          {
            "id": "title",
            "type": "heading",
            "props": {
              "text": "Customer List",
              "level": 1
            }
          },
          {
            "id": "table",
            "type": "data-table",
            "props": {
              "dataSource": "customers",
              "columns": [
                { "key": "name", "header": "Name" },
                { "key": "email", "header": "Email" },
                { "key": "status", "header": "Status", "type": "badge" }
              ],
              "rowActions": [
                {
                  "label": "View",
                  "onClick": {
                    "type": "navigate",
                    "navigateTo": "/customers/{{ row.id }}"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}
```

The `launchWorkflowId` runs the workflow on page load, and `launchWorkflowDataSourceId` makes the result available as `{{ workflow.customers.result }}`. The DataTable's `dataSource: "customers"` automatically binds to this workflow result.

## Permissions

### Application Level

Control who can access the entire app:

```json
{
  "permissions": {
    "public": false,
    "defaultLevel": "none",
    "rules": [
      { "role": "admin", "level": "admin" },
      { "role": "*", "level": "view" }
    ]
  }
}
```

### Page Level

Restrict specific pages:

```json
{
  "permission": {
    "allowedRoles": ["admin", "manager"],
    "redirectTo": "/access-denied"
  }
}
```

### Component Level

Hide components with expressions:

```json
{
  "type": "button",
  "visible": "{{ user.role == 'admin' }}",
  "props": { "label": "Delete All" }
}
```

## Data Flow

```
Page Load
    ↓
Run Launch Workflow (loads data)
    ↓
Render Layout with Expression Context
    ↓
User Interaction → Trigger Action
    ↓
Execute Workflow / Navigate / Update Variable
    ↓
Re-render with Updated Context
```

### Expression Context

Components receive context for expression evaluation:

| Variable | Description |
|----------|-------------|
| `user` | Current user (id, name, email, role) |
| `variables` | Page-level mutable state |
| `workflow` | Workflow results by data source ID (e.g., `workflow.customers.result`) |
| `field` | Form input values |
| `row` | Current row (in table actions only) |

## Managing Apps via MCP

Apps can be managed programmatically using MCP tools at three levels, matching the architecture hierarchy.

### App-Level Tools

| Tool | Description |
|------|-------------|
| `list_apps` | List all applications |
| `get_app` | Get app metadata and structure |
| `update_app` | Update app settings and navigation |
| `publish_app` | Publish app for end users |

### Page-Level Tools

| Tool | Description |
|------|-------------|
| `create_page` | Add a new page to an app |
| `get_page` | Get page definition and layout |
| `update_page` | Update page settings and layout structure |
| `delete_page` | Remove a page from an app |

### Component-Level Tools

| Tool | Description |
|------|-------------|
| `list_components` | List all components on a page |
| `create_component` | Add a component to a page |
| `get_component` | Get component details and props |
| `update_component` | Update component props and settings |
| `delete_component` | Remove a component from a page |
| `move_component` | Reposition a component within the layout |

This granular tool hierarchy enables AI coding assistants to make precise, targeted changes without rewriting entire app definitions. For example, updating a button's label only requires an `update_component` call rather than replacing the full page JSON.

## Best Practices

1. **Keep pages focused**: One purpose per page
2. **Use launchWorkflowId**: Load all page data via workflows, not hardcoded in components
3. **Validate in workflows**: Backend validation is required
4. **Test permissions**: Verify access controls work correctly
5. **Use variables sparingly**: Complex state should live in workflows
6. **Access data via workflow namespace**: Use `{{ workflow.<key>.result }}` for all data access

## Next Steps

- [Components Reference](/sdk-reference/app-builder/components) - All available components
- [Expressions Reference](/sdk-reference/app-builder/expressions) - Expression syntax
- [Actions Reference](/sdk-reference/app-builder/actions) - Action configuration
- [Schema Reference](/sdk-reference/app-builder/schema) - Complete JSON schema